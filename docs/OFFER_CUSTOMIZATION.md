# Offer Selection & Customization Flow

## How Customers Select Flights, Seats, and Meals

---

## Step 1: Search Results - Multiple Offers with Different Flight Times

When a customer searches for JFK â†’ LHR on June 1st, the system generates **3-5 offers**, each with **different flight combinations**:

### Offer Display

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ† RECOMMENDED: Comfort Bundle                    $810      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Outbound: AA100  JFK â†’ LHR                                  â”‚
â”‚           Departs: 08:00  Arrives: 20:00  (12h 0m)         â”‚
â”‚                                                             â”‚
â”‚ Inbound:  AA101  LHR â†’ JFK                                  â”‚
â”‚           Departs: 09:00  Arrives: 12:00  (8h 0m)          â”‚
â”‚                                                             â”‚
â”‚ âœ“ Extra legroom seats (2x)                                 â”‚
â”‚ âœ“ Hot meals (2x)                                           â”‚
â”‚ âœ“ Checked bags (2x)                                        â”‚
â”‚                                                             â”‚
â”‚ You save $50 vs. buying separately                         â”‚
â”‚ [Select This Offer]                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Economy Saver                                     $740      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Outbound: UA300  JFK â†’ LHR                                  â”‚
â”‚           Departs: 12:00  Arrives: 00:00+1  (12h 0m)       â”‚
â”‚                                                             â”‚
â”‚ Inbound:  UA301  LHR â†’ JFK                                  â”‚
â”‚           Departs: 13:00  Arrives: 16:00  (8h 0m)          â”‚
â”‚                                                             â”‚
â”‚ Flights only - no extras                                   â”‚
â”‚ [Select This Offer]                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Premium Experience                                $920      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Outbound: BA200  JFK â†’ LHR                                  â”‚
â”‚           Departs: 10:00  Arrives: 22:00  (12h 0m)         â”‚
â”‚                                                             â”‚
â”‚ Inbound:  BA201  LHR â†’ JFK                                  â”‚
â”‚           Departs: 11:00  Arrives: 14:00  (8h 0m)          â”‚
â”‚                                                             â”‚
â”‚ âœ“ Airport lounge access (4 visits)                         â”‚
â”‚ âœ“ Priority security (4 passes)                             â”‚
â”‚ âœ“ Extra legroom seats (2x)                                 â”‚
â”‚                                                             â”‚
â”‚ [Select This Offer]                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Key Points**:
- Each offer shows **specific flight numbers and times**
- Customer sees **all flights for the day** across different offers
- AI ranks offers by conversion probability (best deals first)

---

## Step 2: Customize Offer (Before Payment)

When customer clicks **"Select This Offer"**, they see a customization screen:

### Option A: Generic Bundle â†’ Customize After Selection

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Review Your Order                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Order ID: order-789                                         â”‚
â”‚ Status: PROPOSED (not paid yet)                             â”‚
â”‚                                                             â”‚
â”‚ âœˆï¸  Outbound Flight: AA100                                  â”‚
â”‚     JFK â†’ LHR  |  June 1, 08:00 - 20:00                    â”‚
â”‚                                                             â”‚
â”‚ âœˆï¸  Inbound Flight: AA101                                   â”‚
â”‚     LHR â†’ JFK  |  June 8, 09:00 - 12:00                    â”‚
â”‚                                                             â”‚
â”‚ ğŸ’º Extra Legroom Seats (2x) - $36                          â”‚
â”‚    [Choose Seats] â† Click to select specific seats         â”‚
â”‚                                                             â”‚
â”‚ ğŸ½ï¸  Hot Meals (2x) - $27                                    â”‚
â”‚    [Choose Meals] â† Click to select meal types             â”‚
â”‚                                                             â”‚
â”‚ ğŸ§³ Checked Bags (2x) - $45                                  â”‚
â”‚    âœ“ Included                                              â”‚
â”‚                                                             â”‚
â”‚ Total: $810                                                 â”‚
â”‚ [Proceed to Payment]                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Seat Selection Modal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select Seats for AA100 (JFK â†’ LHR)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Passenger 1: John Doe                                       â”‚
â”‚                                                             â”‚
â”‚   A   B   C       D   E   F                                â”‚
â”‚ 10 [X] [X] [X]   [X] [X] [X]  Standard ($0)               â”‚
â”‚ 11 [X] [X] [X]   [X] [X] [X]                              â”‚
â”‚ 12 [âœ“] [ ] [ ]   [ ] [ ] [ ]  Extra Legroom (Included)    â”‚
â”‚ 13 [ ] [ ] [ ]   [ ] [ ] [ ]                              â”‚
â”‚ 14 [ ] [ğŸ’°] [ğŸ’°]   [ğŸ’°] [ğŸ’°] [ ]  Premium ($20 upgrade)       â”‚
â”‚                                                             â”‚
â”‚ Selected: 12A (Extra Legroom) âœ“                            â”‚
â”‚                                                             â”‚
â”‚ Passenger 2: Jane Doe                                       â”‚
â”‚ Selected: 12B (Extra Legroom) âœ“                            â”‚
â”‚                                                             â”‚
â”‚ [Confirm Seat Selection]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Meal Selection Modal

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Select Meals for AA100 (JFK â†’ LHR)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Passenger 1: John Doe                                       â”‚
â”‚                                                             â”‚
â”‚ ( ) Chicken with Rice                                      â”‚
â”‚ (â—) Vegetarian Pasta  â† Selected                           â”‚
â”‚ ( ) Beef with Potatoes                                     â”‚
â”‚ ( ) Vegan Salad                                            â”‚
â”‚ ( ) No meal preference                                     â”‚
â”‚                                                             â”‚
â”‚ Passenger 2: Jane Doe                                       â”‚
â”‚ (â—) Chicken with Rice  â† Selected                          â”‚
â”‚                                                             â”‚
â”‚ [Confirm Meal Selection]                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Step 3: API Flow for Customization

### 1. Accept Offer (Creates Order)

```bash
POST /v1/offers/offer-124/accept
{
  "customer_email": "user@example.com",
  "passengers": [
    {"first_name": "John", "last_name": "Doe"},
    {"first_name": "Jane", "last_name": "Doe"}
  ]
}
```

**Response**:
```json
{
  "order_id": "order-789",
  "status": "PROPOSED",
  "total_nuc": 81000,
  "items": [
    {
      "id": "item-1",
      "type": "FLIGHT",
      "product_id": "flight-aa100",
      "status": "ACTIVE"
    },
    {
      "id": "item-2",
      "type": "FLIGHT",
      "product_id": "flight-aa101",
      "status": "ACTIVE"
    },
    {
      "id": "item-3",
      "type": "SEAT",
      "product_id": "seat-extra-legroom",
      "quantity": 2,
      "status": "ACTIVE",
      "customizable": true,
      "metadata": {
        "seat_numbers": null  // Not selected yet
      }
    },
    {
      "id": "item-4",
      "type": "MEAL",
      "product_id": "meal-hot",
      "quantity": 2,
      "status": "ACTIVE",
      "customizable": true,
      "metadata": {
        "meal_types": null  // Not selected yet
      }
    }
  ]
}
```

### 2. Customize Seat Selection

```bash
POST /v1/orders/order-789/items/item-3/customize
{
  "seat_assignments": [
    {
      "passenger_index": 0,
      "seat_number": "12A",
      "flight_id": "flight-aa100"
    },
    {
      "passenger_index": 1,
      "seat_number": "12B",
      "flight_id": "flight-aa100"
    }
  ]
}
```

**Response**:
```json
{
  "item_id": "item-3",
  "status": "ACTIVE",
  "metadata": {
    "seat_numbers": ["12A", "12B"]
  }
}
```

### 3. Customize Meal Selection

```bash
POST /v1/orders/order-789/items/item-4/customize
{
  "meal_assignments": [
    {
      "passenger_index": 0,
      "meal_type": "VEGETARIAN",
      "flight_id": "flight-aa100"
    },
    {
      "passenger_index": 1,
      "meal_type": "CHICKEN",
      "flight_id": "flight-aa100"
    }
  ]
}
```

### 4. Pay for Order

```bash
POST /v1/orders/order-789/pay
{
  "payment_method": "card",
  "payment_token": "tok_visa_4242"
}
```

**Response**:
```json
{
  "order_id": "order-789",
  "status": "PAID",
  "confirmation_code": "ALTIS-789",
  "fulfillment": [
    {
      "item_id": "item-1",
      "type": "FLIGHT",
      "barcode": "ALTIS-1717234567-A1B2C3D4",
      "seat": "12A",
      "meal": "VEGETARIAN"
    },
    {
      "item_id": "item-2",
      "type": "FLIGHT",
      "barcode": "ALTIS-1717234568-B2C3D4E5",
      "seat": "12B",
      "meal": "CHICKEN"
    }
  ]
}
```

---

## Alternative: "See All Flights" Option

If customer wants to see **all available flights** for a specific time:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Don't see what you want?                                    â”‚
â”‚ [View All Flights for June 1st]                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

Clicking this shows a **traditional flight list**:

```
JFK â†’ LHR on June 1st

AA100  08:00 - 20:00  $200  [Build Custom Offer]
BA200  10:00 - 22:00  $220  [Build Custom Offer]
UA300  12:00 - 00:00  $180  [Build Custom Offer]
DL400  14:00 - 02:00  $190  [Build Custom Offer]
```

Customer can **build a custom offer** by selecting specific flights and ancillaries.

---

## Summary

| Question | Answer |
|----------|--------|
| **Multiple flights per day?** | Yes! Each offer includes specific flight times. Different offers = different flight times. |
| **How to select seat?** | After accepting offer, click "Choose Seats" to open seat map and select specific seats. |
| **How to select meal?** | After accepting offer, click "Choose Meals" to select meal type per passenger. |
| **Can I change my mind?** | Yes! Order is PROPOSED until payment. You can modify seats/meals or cancel. |
| **What if I want a different flight time?** | Select a different offer (each has different flight times) or click "View All Flights". |

**Key Insight**: The offer system **pre-bundles** the best combinations, but customers can still **customize details** (seats, meals) before paying.
